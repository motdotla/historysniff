/*! historysniff.js - 0.0.1 - 2014-09-25 - motdotla */
var MicroEvent=function(){};MicroEvent.prototype={bind:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},unbind:function(a,b){this._events=this._events||{},a in this._events!=!1&&this._events[a].splice(this._events[a].indexOf(b),1)},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(a){for(var b=["bind","unbind","trigger"],c=0;c<b.length;c++)"function"==typeof a?a.prototype[b[c]]=MicroEvent.prototype[b[c]]:a[b[c]]=MicroEvent.prototype[b[c]]},"undefined"!=typeof module&&"exports"in module&&(module.exports=MicroEvent),function(a){function b(a,b){var c=new Image,d=(new Date).getTime();c.src=a,e=function(){i(c,d,function(a){b(a)})},f(),g()}function c(){var a=d.pop();b(a.url,function(b){b===!0?historysniff.trigger("match",a):historysniff.trigger("nomatch",a),d.length>0&&c()})}var d,e,f=function(){window.addEventListener("message",e,!1)},g=function(){window.postMessage("","*")},h=function(){window.removeEventListener("message",e,!1)},i=function(a,b,c){var d=(new Date).getTime(),e=d-b;a.complete?(delete a,h(),c(!0)):e>historysniff.ms_measurement&&(delete a,window.stop(),h(),c(!1)),g()},j=function(){return this.ms_measurement=50,this};j.prototype.check=function(a){d=a,c(this)},MicroEvent.mixin(j),a.historysniff=new j}(window);